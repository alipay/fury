# Copyright 2023 The Fury Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# https://www.graalvm.org/latest/reference-manual/native-image/dynamic-features/Reflection/#unsafe-accesses :
# The unsafe offset get on build time may be different from runtime
Args=--initialize-at-build-time=io.fury.memory.MemoryBuffer,\
    io.fury.serializer.collection.UnmodifiableSerializers$Offset,\
    io.fury.serializer.collection.SynchronizedSerializers$Offset,\
    io.fury.serializer.collection.CollectionSerializers$ArraysAsListSerializer,\
    io.fury.serializer.collection.MapSerializers$EnumMapSerializer,\
    io.fury.serializer.StringSerializer$Offset,\
    io.fury.serializer.StringSerializer,\
    io.fury.serializer.Serializers,\
    io.fury.serializer.shim.ShimDispatcher,\
    io.fury.util.Platform,\
    io.fury.util.ReflectionUtils,\
    io.fury.util.unsafe._Lookup,\
    io.fury.util.unsafe._JDKAccess,\
    io.fury.type.Type,\
    io.fury.type.TypeUtils,\
    io.fury.Fury,\
    io.fury.type.Type,\
    io.fury.serializer.JavaSerializer,\
    io.fury.util.ReflectionUtils,\
    io.fury.builder.ObjectCodecBuilder,\
    com.google.common.reflect.Types$ClassOwnership$1,\
    io.fury.shaded.org.codehaus.janino.Java$ArrayType,\
    io.fury.serializer.LocaleSerializer,\
    io.fury.shaded.org.codehaus.janino.Java$AbstractCompilationUnit$TypeImportOnDemandDeclaration,\
    io.fury.shaded.org.codehaus.janino.Compiler,\
    io.fury.shaded.org.codehaus.janino.UnitCompiler,\
    com.google.common.util.concurrent.SettableFuture,\
    com.google.common.reflect.Types$JavaVersion$1,\
    io.fury.config.FuryBuilder,\
    io.fury.shaded.org.codehaus.janino.Java$MethodInvocation,\
    io.fury.shaded.org.codehaus.janino.Java$FunctionDeclarator$FormalParameter,\
    io.fury.shaded.org.codehaus.janino.Java$ExpressionStatement,\
    io.fury.shaded.org.codehaus.janino.Java$FunctionDeclarator$FormalParameters,\
    io.fury.shaded.org.codehaus.janino.Java$Rvalue,\
    io.fury.shaded.javassist.util.proxy.DefineClassHelper,\
    io.fury.shaded.org.codehaus.janino.Java$LocalVariableAccess,\
    io.fury.shaded.org.codehaus.janino.ClassLoaderIClassLoader,\
    io.fury.shaded.org.codehaus.janino.Java$Located$1,\
    io.fury.shaded.org.codehaus.janino.Java$EmptyStatement,\
    io.fury.shaded.org.codehaus.janino.Java$ForStatement,\
    io.fury.shaded.org.codehaus.janino.Java$Type,\
    io.fury.shaded.org.codehaus.janino.Java$Cast,\
    io.fury.shaded.org.codehaus.janino.Java$BooleanRvalue,\
    io.fury.shaded.org.codehaus.janino.IClass$PrimitiveIClass,\
    io.fury.shaded.org.codehaus.janino.Compiler$CompilerIClassLoader,\
    io.fury.shaded.javassist.util.proxy.SecurityActions,\
    io.fury.util.unsafe._Lookup,\
    io.fury.shaded.org.codehaus.commons.compiler.util.iterator.Iterables$5,\
    com.google.common.base.internal.Finalizer,\
    io.fury.serializer.ReplaceResolveSerializer,\
    com.google.common.primitives.Primitives,\
    io.fury.type.GenericType,\
    io.fury.shaded.org.codehaus.janino.Java$BreakableStatement,\
    io.fury.shaded.org.codehaus.janino.Java$LocalVariableDeclarationStatement,\
    io.fury.shaded.org.codehaus.janino.TokenStreamImpl$1,\
    com.google.common.reflect.Types$TypeVariableInvocationHandler,\
    io.fury.shaded.org.codehaus.janino.Java$ThisReference,\
    io.fury.shaded.org.codehaus.janino.IClass,\
    io.fury.shaded.org.codehaus.janino.Java$ClassLiteral,\
    io.fury.resolver.ClassResolver$2,\
    io.fury.shaded.org.codehaus.janino.Parser$1,\
    io.fury.shaded.org.codehaus.janino.Java$BinaryOperation,\
    io.fury.shaded.org.codehaus.janino.Java$Crement,\
    io.fury.shaded.org.codehaus.janino.Java$ReturnStatement,\
    com.google.common.reflect.Types$ClassOwnership,\
    io.fury.shaded.org.codehaus.janino.Java$WhileStatement,\
    io.fury.shaded.org.codehaus.janino.Java$FunctionDeclarator,\
    io.fury.shaded.org.codehaus.janino.Java$Atom,\
    io.fury.shaded.org.codehaus.janino.Java$SimpleType,\
    io.fury.shaded.org.codehaus.janino.Java$FieldAccessExpression,\
    io.fury.shaded.org.codehaus.janino.Java$AbstractTypeBodyDeclaration,\
    io.fury.shaded.org.codehaus.janino.Parser,\
    io.fury.shaded.org.codehaus.janino.Java$QualifiedThisReference,\
    io.fury.shaded.org.codehaus.janino.Java$Assignment,\
    io.fury.shaded.org.codehaus.janino.Java$NullLiteral,\
    io.fury.shaded.org.codehaus.janino.Java$ParenthesizedExpression,\
    io.fury.shaded.org.codehaus.janino.Java$Statement,\
    io.fury.shaded.org.codehaus.janino.IClassLoader$1,\
    io.fury.shaded.org.codehaus.janino.Java$VariableDeclarator,\
    io.fury.shaded.org.codehaus.janino.Java$AbstractCompilationUnit$SingleTypeImportDeclaration,\
    io.fury.shaded.org.codehaus.janino.Java$MethodDeclarator,\
    com.google.common.base.FinalizableReferenceQueue,\
    io.fury.shaded.org.codehaus.janino.Java$AbstractCompilationUnit$ImportDeclaration,\
    io.fury.codegen.JaninoUtils,\
    io.fury.shaded.org.codehaus.janino.Java$Invocation,\
    io.fury.shaded.org.codehaus.janino.ReflectionIClass,\
    io.fury.util.record.RecordUtils,\
    io.fury.shaded.org.codehaus.janino.Java$Literal,\
    io.fury.shaded.org.codehaus.janino.IClassLoader,\
    io.fury.shaded.org.codehaus.janino.Java$PrimitiveType,\
    io.fury.shaded.org.codehaus.janino.CodeContext,\
    io.fury.serializer.collection.ImmutableCollectionSerializers,\
    io.fury.shaded.org.codehaus.janino.IClass$2,\
    com.google.common.collect.RegularImmutableMap,\
    io.fury.shaded.org.codehaus.janino.Descriptor,\
    com.google.common.reflect.Types$NativeTypeVariableEquals,\
    io.fury.shaded.org.codehaus.janino.Java$Located,\
    io.fury.shaded.org.codehaus.janino.Java$ReferenceType,\
    io.fury.shaded.org.codehaus.janino.Java$UnaryOperation,\
    io.fury.util.ClassLoaderUtils,\
    io.fury.shaded.org.codehaus.janino.UnitCompiler$39,\
    io.fury.shaded.org.codehaus.janino.Java$IntegerLiteral,\
    io.fury.shaded.org.codehaus.janino.Java$Lvalue,\
    io.fury.shaded.org.codehaus.janino.Java$PackageDeclaration,\
    com.google.common.reflect.Types$JavaVersion$4,\
    io.fury.shaded.org.codehaus.janino.Java$FieldAccess,\
    io.fury.shaded.org.codehaus.janino.Java$Block,\
    io.fury.builder.AccessorHelper,\
    io.fury.codegen.Expression$Literal,\
    io.fury.shaded.org.codehaus.janino.Java$ContinuableStatement,\
    io.fury.shaded.org.codehaus.janino.Java$IfStatement,\
    com.google.common.collect.RegularImmutableBiMap,\
    io.fury.shaded.org.codehaus.janino.Java$ConstructorDeclarator,\
    com.google.common.reflect.Types$JavaVersion$3,\
    io.fury.shaded.org.codehaus.janino.Java$SuperConstructorInvocation,\
    io.fury.shaded.org.codehaus.janino.UnitCompiler$44,\
    io.fury.shaded.org.codehaus.janino.Java$AmbiguousName,\
    io.fury.shaded.org.codehaus.janino.Scanner,\
    io.fury.shaded.org.codehaus.janino.Java$FieldDeclaration,\
    io.fury.memory.BoundsChecking,\
    io.fury.shaded.org.codehaus.janino.Java$Package,\
    io.fury.serializer.ArraySerializers,\
    io.fury.shaded.org.codehaus.janino.Java$AccessModifier,\
    io.fury.util.ClassLoaderUtils$ParentClassLoader,\
    com.google.common.collect.RegularImmutableSortedSet,\
    io.fury.type.Descriptor,\
    io.fury.serializer.PrimitiveSerializers$1,\
    org.slf4j.LoggerFactory,\
    io.fury.collection.MultiKeyWeakMap,\
    io.fury.serializer.collection.UnmodifiableSerializers,\
    io.fury.codegen.CompileUnit,\
    io.fury.serializer.StringSerializer,\
    com.google.common.util.concurrent.AbstractFuture$UnsafeAtomicHelper,\
    io.fury.memory.MemoryBuffer,\
    com.google.common.math.IntMath$1,\
    io.fury.resolver.ClassResolver,\
    io.fury.codegen.CodegenContext,\
    io.fury.serializer.collection.GuavaCollectionSerializers,\
    io.fury.util.unsafe._JDKAccess,\
    io.fury.codegen.CodeGenerator,\
    io.fury.serializer.collection.SynchronizedSerializers,\
    io.fury.util.ClassLoaderUtils$ByteArrayClassLoader,\
    com.google.common.collect.AbstractIterator$1,\
    com.google.common.cache.LocalCache,\
    io.fury.serializer.LambdaSerializer,\
    com.google.common.collect.ImmutableSortedMap,\
    io.fury.memory.MemoryUtils,\
    io.fury.type.DescriptorGrouper,\
    sun.misc.Unsafe,\
    org.slf4j.LoggerFactory,\
    com.google.common.collect.Platform
